<div id="whole-content" style="display: none;">
{% extends 'main/index.html' %}
{% load static %}
{% block content %}

<div class="square">
    <div class="container-fluid">
        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <h2 class="mb-sm-0">Resident Information</h2>
                </div>
            </div>
        </div>
        <!-- end page title -->
        <div class="card">
            <div class="card-body">
                <div class="row g-2">
                    <div class="col-lg-auto">
                        <div class="hstack gap-2">
                            <a href="{% url 'terms_conditions_forms' %}" class="btn btn-primary"  id="addResidentBtn">
                                <i class="ri-add-line align-bottom me-1"></i> Add Resident Profile
                              </a>
                        </div>
                    </div>
                    <!--end col-->
                    <div class="col-lg-3 col-auto">
                        <div class="search-box">
                            <input type="text" class="form-control search" id="searchInput" placeholder="Search for Resident Profile...">
                            <i class="ri-search-line search-icon"></i>
                        </div>
                    </div> 
                </div>
                <div class="filter">
                        <button class="btn btn-soft-secondary filter-btn" data-residentid="' + resident.id + '" type="button" data-bs-toggle="modal" data-bs-target="#FilterModal">
                        <a class="dropdown-item"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i> Filter</a>
                        </button>
                        </div>
                <!--end row-->
            </div>

<!-- Advanced Search/Filter Modal -->
 <div class="modal fade" id="FilterModal" tabindex="-1" aria-labelledby="editModalLabel" aria-modal="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="FilterModalTitle">Advanced Search/ Filter</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                    <div class="row g-4">
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label for="age" class="form-label">Age</label>
                                <div class="input-group">
                                    <select class="form-select" id="age">
                                        <option value="" selected></option>
                                        <option value="0-2 yrs. old">0-2 yrs. old</option>
                                        <option value="3-5 yrs. old">3-5 yrs. old</option>
                                        <option value="6-12 yrs. old">6-12 yrs. old</option>
                                        <option value="13-19 yrs. old">13-19 yrs. old</option>
                                        <option value="20-59 yrs. old">20-59 yrs. old</option>
                                        <option value="60 and above">60 and above</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label for="civil_status" class="form-label">Civil Status</label>
                                <select class="form-select" id="civil_status">
                                    <option value="" selected></option>
                                    <option value="Single">Single</option>
                                    <option value="Married">Married</option>
                                    <option value="Widowed">Widowed</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row g-4">
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label for="blood_type" class="form-label">Blood Type</label>
                                <select class="form-select" id="blood_type">
                                    <option value="" selected></option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="AB">AB</option>
                                    <option value="O">O</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label class="form-label">Sex<span>*</span></label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="sex" id="sex_male" value="Male">
                                    <label class="form-check-label" for="sex_male">Male</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="sex" id="sex_female" value="Female">
                                    <label class="form-check-label" for="sex_female">Female</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row g-4">
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label for="occupation" class="form-label">Occupation </label>
                                <select class="form-select" id="occupation">
                                    <option value="" selected></option>
                                    <option value="Employed">Employed</option>
                                    <option value="Student">Student</option>
                                    <option value="Unemployed">Unemployed</option>
                                    <option value="Retired">Retired</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label class="form-label">Is Single Parent? <span>*</span></label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_single_parent" id="is_single_parent_yes" value="Yes">
                                    <label class="form-check-label" for="is_single_parent_yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_single_parent" id="is_single_parent_no" value="No">
                                    <label class="form-check-label" for="is_single_parent_no">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row g-4">
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label class="form-label">Is Indigenous?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_indigenous" id="is_indigenous_yes" value="Yes">
                                    <label class="form-check-label" for="is_indigenous_yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_indigenous" id="is_indigenous_no" value="No">
                                    <label class="form-check-label" for="is_indigenous_no">No</label>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label class="form-label">Is Person with Disability?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_pwd" id="is_pwd_yes" value="Yes">
                                    <label class="form-check-label" for="is_pwd_yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_pwd" id="is_pwd_no" value="No">
                                    <label class="form-check-label" for="is_pwd_no">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row g-4">
                        <div class="col-xxl-3 col-md-6">
                            <div class="asterisk">
                                <label class="form-label">Is Registered Voter?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_registered_voter" id="is_registered_voter_yes" value="Yes">
                                    <label class="form-check-label" for="is_registered_voter_yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="is_registered_voter" id="is_registered_voter_no" value="No">
                                    <label class="form-check-label" for="is_registered_voter_no">No</label>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    <div class="row gy-3">
                        <div class="col-lg-12">
                            <div class="hstack gap-1 justify-content-end mb-3">
                                <button type="button" class="btn btn-soft-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" id="filterButton">Filter</button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
    <!-- end of Advanced Search/ Filter  -->     
    <!--Pagination-->
            <!--end card-body-->
            <div class="row h-100">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-striped display" style="width:100%" id="userList">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                
                                        <th style="width: 20%;">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="residentTableBody">
                                    <!--  Pagination Body called in JS (line 892)-->
                                </tbody>
                            </table>
                <!-- Pagination buttons -->
                        <div class="d-flex justify-content-center">
                            <nav aria-label="Page navigation example">
                                <ul class="pagination">
                                    <li class="page-item">
                                        <a class="page-link" href="#" aria-label="Previous" onclick="loadPreviousPage()">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <!-- You can dynamically generate page buttons here -->
                                    <!-- For example, if you have 5 pages, you can create 5 buttons -->
                                    <li class="page-item"><a class="page-link pagination-link" href="#" data-page="1">1</a></li>
                                    <li class="page-item"><a class="page-link pagination-link" href="#" data-page="2">2</a></li>
                                    <li class="page-item"><a class="page-link pagination-link" href="#" data-page="3">3</a></li>
                                    <!-- Add more buttons as needed -->
                                    <li class="page-item">
                                        <a class="page-link" href="#" aria-label="Next" onclick="loadNextPage()">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        </div> <!-- end card-body-->
                    </div>
                </div> <!-- end col-->
            </div> <!-- end row-->


            <!--  EDIT MODAL -->
            <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-modal="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="editModalLabel">Resident's Information</h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form action="javascript:void(0);">
                                <div class="row g-4">
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="first_name" class="form-label1">First Name <span>*</span></label>
                                                <input type="form" class="form-control" id="first_name" placeholder="First Name">
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="middle_name" class="form-label1">Middle Name </label>
                                                <input type="form" class="form-control" id="middle_name" placeholder="Middle Name" >
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk"> 
                                                <label for="last_name" class="form-label1">Last Name <span>*</span></label>
                                                <input type="form" class="form-control" id="last_name" placeholder="Last Name" >
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-xxl-3 col-md-6">
                                           <div class="asterisk">
                                                    <label for="suffix" class="form-label1">Suffix</label>
                                                    <div class="input-group">
                                                        <select class="form-select" id="suffix">
                                                            <option value="" selected>Select a suffix</option>
                                                            <option value="Sr.">Sr.</option>
                                                            <option value="Jr.">Jr.</option>
                                                            <option value="I">I</option>
                                                            <option value="II">II</option>
                                                            <option value="III">III</option>
                                                        </select>
                                                    </div>
                                                    </div>
                                                </div>
                                        <!--end col-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="age" class="form-label1">Age <span>*</span></label>
                                                <input type="form" class="form-control" id="e_age" placeholder="Age">
                                            </div>                 
                                        </div>
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="birthday" class="form-label1">Birthday <span>*</span></label>
                                                <input type="date" class="form-control" id="birthday" >
                                            </div>
                                        </div>
                                         <!-- Birth order -->
                                         <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="birth_order" class="form-label1">Birth Order <span>*</span></label>
                                            <select class="form-select" id="e_birth_order">
                                                <option value=""  selected>Select birth order</option>
                                                <option value="First Born">First Born</option>
                                                <option value="Second Born">Second Born</option>
                                                <option value="Middle Child">Middle Child</option>
                                                <option value="Youngest Child">Youngest Child</option>
                                                <option value="Only Child">Only Child</option>
                                            </select>
                                            </div>
                                        </div>
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="birth_place" class="form-label1">Birth Place <span>*</span></label>
                                                <input type="text" class="form-control" id="birth_place" placeholder="Birth Place">
                                            </div>
                                        </div>
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="blood_type" class="form-label1">Blood Type <span>*</span></label>
                                                <input type="text" class="form-control" id="blood_type" placeholder="Blood type">
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <br>
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="sex" class="form-label1">Sex <span>*</span></label>
                                                <select class="form-select" id="sex">
                                                    <option value="" selected>Select sex</option>
                                                    <option value="Male">Male</option>
                                                    <option value="Female">Female</option>
                                                </select>
                                            </div>
                                        </div>
                                        <!--end col-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="civil_status" class="form-label1">Civil Status <span>*</span></label>
                                            <select class="form-select" id="civil_status">
                                                <option value="" selected>Select civil status</option>
                                                <option value="Single">Single</option>
                                                <option value="Married">Married</option>
                                                <option value="Widowed">Widowed</option>
                                            </select>
                                        </div>
                                        </div>
                                        <!-- Address -->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="house_no" class="form-label1">House No/Blk <span>*</span></label>
                                                <input type="text" class="form-control" id="house_no" placeholder="House No/Blk">
                                            </div>
                                        </div>
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="street" class="form-label1">Street<span>*</span></label>
                                                <input type="text" class="form-control" id="street" placeholder="Street">
                                            </div>
                                        </div>
                                        <!--Phone number-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="phone_no" class="form-label1">Phone Number <span>*</span></label>
                                                <div class="form-icon right">
                                                    <input type="number" class="form-control form-control-icon" id="phone_no" placeholder="09*******">
                                                    <i class="ri-phone-line"></i>
                                            </div>
                                            </div>
                                        </div>
                                        <!--email-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                                <label for="email" class="form-label1">Email <span>*</span></label>
                                                <div class="form-icon right">
                                                    <input type="email" class="form-control form-control-icon" id="email" placeholder="example@gmail.com">
                                                    <i class="ri-mail-unread-line"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Occupation-->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="occupation" class="form-label1">Occupation <span>*</span></label>
                                            <select class="form-select" id="occupation" onchange="showAdditionalFieldsOccupation()">
                                                <option value="" selected>Select Occupation</option>
                                                <option value="Employed">Employed</option>
                                                <option value="Student">Student</option>
                                                <option value="Unemployed">Unemployed</option>
                                                <option value="Retired">Retired</option>
                                            </select>
                                            </div>
                                        </div>
                                       <!-- employed-->
                                        <div id="additionalFieldsEmployed" style="display: none;">
                                            <div class="row">
                                                <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                    <label for="educational_attainment" class="form-label1">Educational Attainment <span>*</span></label>
                                                    <input type="text" id="educational_attainment" class="form-control">
                                                </div>
        
                                                <div class="col-xxl-3 col-md-6">
                                                    <label for="emp_school" class="form-label1">School</label>
                                                    <input type="text" class="form-control" id="emp_school" placeholder="School">
                                                </div>                       
                                                <div class="col-xxl-3 col-md-6 ">
                                                    <label for="Degree" class="form-label1">Degree</label>
                                                    <input type="text" id="emp_degree" class="form-control">
                                                </div>
                                                <div class="col-xxl-3 col-md-6 ">
                                                    <label for="emp_company" class="form-label1">Company</label>
                                                    <input type="text" id="emp_company" class="form-control">
                                                </div>
                                                <div class="col-xxl-3 col-md-6 ">
                                                    <label for="emp_position" class="form-label1">Position</label>
                                                    <input type="text" id="emp_position" class="form-control" >
                                                </div>
                                                <div class="col-xxl-3 col-md-6 ">
                                                    <label for="emp_salary" class="form-label1">Salary (Monthly Income)</label>
                                                    <input type="text" id="emp_salary" class="form-control" >
                                                </div>
                                                <div class="col-xxl-3 col-md-6 ">
                                                    <label for="years_employed" class="form-label1">Years Employed</label>
                                                    <input type="text" id="years_employed" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Student -->
                                        <div id="additionalFieldsStudent" style="display: none;">
                                            <div class="row">
                                                <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                    <label for="educational_level" class="form-label1">Education Level</label>
                                                    <select class="form-select" id="educational_level"  onchange="toggleFields()">
                                                        <option value="" disabled selected>Select Education Level</option>
                                                        <option value="Elementary">Elementary</option>
                                                        <option value="High School">High School</option>
                                                        <option value="Senior High School">Senior High School</option>
                                                        <option value="College">College</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                             <!-- student element choice -->
                                             <div id="elementaryFields" style="display: none;">
                                                <div class="row">
                                                    <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                        <label for="elem_grade_level" class="form-label1">Grade Level</label>
                                                        <input type="text" id="elem_grade_level" class="form-control"  placeholder="Grade Level">
                                                    </div>
                                                </div>
                                             </div>
                                             <div id="highSchoolFields" style="display: none;">
                                                <div class="row">
                                                    <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                        <label for="hs_grade_level" class="form-label1">Grade Level</label>
                                                        <input type="text" id="hs_grade_level" class="form-control"  placeholder="Grade Level">
                                                    </div>
                                                </div>
                                             </div>
                                             <div id="seniorHighSchoolFields" style="display: none;">
                                                <div class="row">
                                                    <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                        <label for="hs_grade_level" class="form-label1">Grade Level</label>
                                                        <input type="text" id="shs_grade_level" class="form-control"  placeholder="Grade Level">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                        <label for="shs_strand" class="form-label1">Strand</label>
                                                        <select class="form-select" id="shs_strand">
                                                            <option value=""  selected>Select Strand</option>
                                                            <option value="HUMSS">HUMSS</option>
                                                            <option value="ABM">ABM</option>
                                                            <option value="Gas">GAS</option>
                                                            <option value="Stem">Stem</option>
                                                            <option value="TVL">TVL</option>
                                                            <option value="ICT">ICT</option>
                                                            <option value="Arts">Arts & Design</option>
                                                        </select>
                                                </div>
                                             </div>
                                             </div>
                                             <div id="CollegeFields" style="display: none;">
                                                <div class="row">
                                                    <div class="col-xxl-3 col-md-6 ">
                                                        <label for="college_course" class="form-label">Course</label>
                                                        <input type="text" id="college_course" class="form-control" placeholder="Course">
                                                    </div>
                                                    <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                        <label for="college_year" class="form-label1">Year Level</label>
                                                        <input type="text" id="college_year" class="form-control" placeholder="Grade Level">
                                                    </div>
                                                    <div class="col-xxl-3 col-md-6 ">
                                                        <label for="college_school" class="form-label1">School</label>
                                                        <input type="text" id="college_school" class="form-control" placeholder="School">
                                                    </div>
                                                </div>
                                             </div>
                                            <!-- End of Occupation -->
                                            <div class="row gy-3">
                                                <div class="col-xxl-3 col-md-6">
                                                    <div class="asterisk">
                                                        <label for="ethnicity" class="form-label1">Ethnicity<span> *</span></label>
                                                        <input type="text" class="form-control" id="ethnicity" placeholder="Ethnicity" required>
                                                    </div>
                                                </div>
                                                <div class="col-xxl-3 col-md-6">
                                                    <div class="asterisk">
                                                        <label for="religion" class="form-label1">Religion<span> *</span></label>
                                                        <input type="text" class="form-control" id="religion" placeholder="Religion" required>
                                                    </div>
                                                </div>    
                                                <div class="col-xxl-3 col-md-6">
                                                    <div class="optional">
                                                        <label for="SSS_no" class="form-label1">SSS Number (Optional)</label>
                                                        <input type="form" class="form-control" id="SSS_no" placeholder="Insert SSS Number">
                                                    </div>
                                                </div>         
                                                    <!--end col-->
                                                    <div class="col-xxl-3 col-md-6">
                                                        <div class="optional">
                                                            <label for="TIN_no" class="form-label1">TIN Number (Optional)</label>
                                                            <input type="form" class="form-control" id="TIN_no" placeholder="Insert TIN Number">
                                                        </div>
                                                    </div>
                                                    <!--end col-->
                                                    <div class="col-xxl-3 col-md-6">
                                                        <div class="optional"> 
                                                            <label for="GSIS_no" class="form-label1">GSIS Number (Optional)</label>
                                                            <input type="form" class="form-control" id="GSIS_no" placeholder="Insert GSIS Number">
                                                        </div>
                                                    </div>
                                                    <!--end col-->
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                            <label for="is_single_parent" class="form-label1">Is Single Parent?<span> *</span></label>
                                                            <select class="form-select" id="is_single_parent">
                                                                <option value="" disabled selected>Select Yes or No</option>
                                                                <option value="Yes">Yes</option>
                                                                <option value="No">No</option>
                                                            </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        <!--END ROW-->
                                        <!-- indigenous -->
                                         <div class="row gy-3">
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="is_indigenous" class="form-label1">Is Indigenous? <span> *</span></label>
                                            <select class="form-select" id="is_indigenous" onchange="Ethnicityfunction()">
                                                <option value="" selected>Select Yes or No</option>
                                                <option value="Yes">Yes</option>
                                                <option value="No">No</option>
                                            </select>
                                            </div>
                                        </div>
                                        <div id="indigenousYes" style="display: none;">
                                            <div class="row ">
                                                <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                    <label for="indigenous_yes" class="form-label1">What type?</label>
                                                    <input type="text" id="indigenous_type" class="form-control" placeholder="Type of Ethnicity">
                                                </div>
                                            </div>
                                         </div>
                                         <!-- PWD -->
                                         <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="is_pwd" class="form-label1">Is PWD? <span>*</span></label>
                                            <select class="form-select" id="is_pwd" onchange="PWDfunction()">
                                                <option value=""  selected>Select Yes or No</option>
                                                <option value="Yes">Yes</option>
                                                <option value="No">No</option>
                                            </select>
                                            </div>
                                        </div>
                                        <div id="pwdYes" style="display: none;">
                                            <div class="row ">
                                                <div class="col-xxl-3 col-md-6 offset-md-3 offset-xxl-3">
                                                    <label for="pwd_id" class="form-label">PWD ID</label>
                                                    <input class="form-control" type="text" id="pwd_id">
                                                </div>
                                            </div>
                                         </div>
                                         <!-- Voter -->
                                        <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="is_registered_voter" class="form-label1">Is Registered Voter? <span>*</span></label>
                                            <select class="form-select" id="is_registered_voter" onchange="RegisteredVoter()">
                                                <option value="" selected>Select Yes or No</option>
                                                <option value="Yes">Yes</option>
                                                <option value="No">No</option>
                                            </select>
                                            </div>
                                        </div>
                                        <div id="registeredYes" style="display: none;">
                                            <div class="row ">
                                                <div class="col-xxl-3 col-md-6">
                                                    <div class="">
                                                    <label for="voting_precint_no" class="form-label">Voting Precint No. <span>*</span></label>
                                                    <input type="text" id="voting_precint_no" class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                         </div>
                                         <!-- Multiple Files Input Example -->
                                         <div class="col-xxl-3 col-md-6">
                                            <div class="asterisk">
                                            <label for="valid_id" class="form-label1">Valid ID <span>*</span></label>
                                            <input class="form-control" type="file" id="valid_id" multiple>
                                             </div>
                                        </div>    
                                </div>
                                    <!-- family bg -->
                                                <div class="col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header align-items-center d-flex justify-content-between">
                                                            <h4 class="mb-sm-0">Mother's Information</h4>
                                                        </div>
                                                <!-- end card header -->
                                                        <div class="card-body">
                                                            <div class="live-preview">
                                                                <div class="row gy-4">
                                                                    <div class="col-xxl-3 col-md-6">
                                                                        <div class="asterisk">
                                                                            <label for="m_first_name" class="form-label1">First Name</label>
                                                                            <input type="form" class="form-control" id="m_first_name" placeholder="First Name">
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div class="col-xxl-3 col-md-6">
                                                                        <div class="asterisk">
                                                                            <label for="m_middle_name" class="form-label1">Middle Name</label>
                                                                            <input type="form" class="form-control" id="m_middle_name" placeholder="Middle Name">
                                                                      </div>
                                                                    </div>
                                                                    <div class="col-xxl-3 col-md-6">
                                                                        <div class="asterisk">
                                                                        <label for="lastname" class="form-label1"> Last Name</label>
                                                                        <input type="form" class="form-control" id="m_last_name" placeholder="Last Name">
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="Address" class="form-label1">House No/Blk</label>
                                                                        <input type="text" class="form-control" id="m_blk" placeholder="House No/Blk" >
                                                                    </div>
                                                                </div>
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="Address" class="form-label1">Street</label>
                                                                        <input type="text" class="form-control" id="m_street" placeholder="Street" >
                                                                    </div>
                                                                </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="exampleInputdate" class="form-label1">Birthday</label>
                                                                    <input type="date" class="form-control" id="m_birthday" >
                                                                </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="sex" class="form-label1">Sex</label>
                                                                    <select class="form-select" id="m_sex" >
                                                                        <option value=""  selected>Select sex</option>
                                                                        <option value="male">Male</option>
                                                                        <option value="female">Female</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="phonenum" class="form-label1">Phone Number</label>
                                                                    <div class="form-icon right">
                                                                        <input type="phone" class="form-control form-control-icon" id="m_phone_no" placeholder="09*******" >
                                                                        <i class="ri-phone-line"></i>
                                                                    </div>
                                                                 </div>
                                                                </div>
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="email" class="form-label1">Email</label>
                                                                        <div class="form-icon right">
                                                                            <input type="email" class="form-control form-control-icon" id="m_email" placeholder="example@gmail.com" >
                                                                            <i class="ri-mail-unread-line"></i>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                        </div>
                                                        </div>
                                                  </div>
                                                 </div>
                                                 </div>
        
                                        <!-- Father's Information -->
                                        <div class="col-lg-12">
                                            <div class="card">
                                                <div class="card-header align-items-center d-flex justify-content-between">
                                                    <h4 class="mb-sm-0">Father's Information</h4>
                                                </div>
                                        <!-- end card header -->
                                                <div class="card-body">
                                                    <div class="live-preview">
                                                        <div class="row gy-4">
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="firstname" class="form-label1"> Father's First Name</label>
                                                                    <input type="form" class="form-control" id="f_first_name" placeholder="First Name">
                                                                </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="middlename" class="form-label1"> Middle Name</label>
                                                                    <input type="form" class="form-control" id="f_middle_name" placeholder="Middle Name">
                                                              </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                <label for="lastname" class="form-label1"> Last Name</label>
                                                                <input type="form" class="form-control" id="f_last_name" placeholder="Last Name">
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <label for="Suffix" class="form-label1">Suffix</label>
                                                            <div class="input-group">
                                                                <select class="form-select" id="f_suffix" >
                                                                    <option value="" selected>Select a suffix</option>
                                                                    <option value="Sr.">Sr.</option>
                                                                    <option value="Jr.">Jr.</option>
                                                                    <option value="I">I</option>
                                                                    <option value="II">II</option>
                                                                    <option value="III">III</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="Address" class="form-label1">House No/Blk</label>
                                                                <input type="text" class="form-control" id="f_blk" placeholder="House No/Blk" >
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="Address" class="form-label1">Street</label>
                                                                <input type="text" class="form-control" id="f_street" placeholder="Street" >
                                                            </div>
                                                        </div>
                                                    <div class="col-xxl-3 col-md-6">
                                                        <div class="asterisk">
                                                            <label for="exampleInputdate" class="form-label1">Birthday</label>
                                                            <input type="date" class="form-control" id="f_birthday" >
                                                        </div>
                                                    </div>
                                                    <div class="col-xxl-3 col-md-6">
                                                        <div class="asterisk">
                                                            <label for="sex" class="form-label1">Gender</label>
                                                            <select class="form-select" id="f_sex">
                                                                <option value="" selected>Select sex</option>
                                                                <option value="male">Male</option>
                                                                <option value="female">Female</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-xxl-3 col-md-6">
                                                        <div class="asterisk">
                                                            <label for="phonenum" class="form-label1">Phone Number</label>
                                                            <div class="form-icon right">
                                                                <input type="phone" class="form-control form-control-icon" id="f_phone_no" placeholder="09*******" >
                                                                <i class="ri-phone-line"></i>
                                                            </div>
                                                         </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="email" class="form-label1">Email</label>
                                                                <div class="form-icon right">
                                                                    <input type="email" class="form-control form-control-icon" id="f_email" placeholder="example@gmail.com">
                                                                    <i class="ri-mail-unread-line"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                        </div>
                                        </div>
                                    <div class="col-lg-12">
                                        <div class="hstack gap-2 justify-content-end">
                                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                        </div>
                                    </div><!--end col-->
                                </div><!--end row-->
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end of modal edit -->            
                
                   
                <!--VIEW MODAL-->                        
                <div class="modal fade" id="viewModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Resident's Information</h4>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form action="javascript:void(0);">
                                    <div class="row g-4">
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_name" class="form-label1">Name</label>
                                                    <span id="v_name"></span>
                                                    <div id="v_suffix"></div>
                                                </div>
                                            </div>
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_age" class="form-label1">Age</label>
                                                    <span id="v_age"></span>
                                                </div>
                                            </div>
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_birthday" class="form-label1">Birthday</label>
                                                    <span id="v_birthday"></span>
                                                </div>
                                            </div>
                                             <!-- Birth order -->
                                             <div class="row g-4">
                                                <div class="col-xxl-3 col-md-6">
                                                    <div class="asterisk">
                                                        <label for="v_birth_order" class="form-label1">Birth Order</label>
                                                        <span id="v_birth_order"></span>
                                                    </div>
                                                </div>
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_birth_place" class="form-label1">Birth Place</label>
                                                    <span id="v_birth_place"></span> 
                                                </div>
                                            </div>
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_blood_type" class="form-label1">Blood Type </label>
                                                    <span id="v_blood_type"></span> 
                                                </div>
                                            </div>
                                            <!--end col-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_sex" class="form-label1">Sex</label>
                                                    <span id="v_sex"></span>
                                                </div>
                                            </div>
                                            <!--end col-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_civil_status" class="form-label1">Civil Status</label>
                                                <span id="v_civil_status"></span>
                                            </div>
                                            </div>
                                            <!-- Address -->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_house_no" class="form-label1">Address</label>
                                                    <span id="v_house_no"></span>
                                                </div>
                                            </div>
                                            <!--Phone number-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_phone_no" class="form-label1">Phone Number</label>
                                                    <div class="form-icon right">
                                                    <span id="v_phone_no"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--email-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_email" class="form-label1">Email</label>
                                                    <div class="form-icon right">
                                                        <span id="v_email"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--Occupation-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_occupation" class="form-label1">Occupation</label>
                                                <span id="v_occupation"></span> 
                                                </div>
                                            </div>
                                            <!--Occupation: Employed-->
                                            <div id="v_educational_attainment"></div>
                                            <div id="v_emp_degree"></div>
                                            <div id="v_emp_company"></div>
                                            <div id="v_emp_position"></div>
                                            <div id="v_emp_salary"></div>
                                            <div id="v_years_employed"></div>
                                            <!--Occupation: Students-->
                                            <div id="v_educational_level"></div>
                                            <!--Occupation: Students: Elem-->
                                            <div id="v_elem_grade_level"></div>
                                            <!--Occupation: Students: HS-->
                                            <div id="v_hs_grade_level"></div>
                                            <!--Occupation: Students: SHS-->
                                            <div id="v_shs_grade_level"></div>
                                            <div id="v_shs_strand"></div>
                                            <!--Occupation: Students: College-->
                                            <div id="v_college_course"></div>
                                            <div id="v_college_year"></div>
                                            <div id="v_college_school"></div>

                                            <!--Religion-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_religion" class="form-label1">Religion</label>
                                                    <span id="v_religion"></span>
                                                </div>
                                            </div>
                                            <!--Ethnicity-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                    <label for="v_ethnicity" class="form-label1">Ethnicity</label>
                                                    <span id="v_ethnicity"></span>
                                                </div>
                                            </div>
                                    
                                            <!-- indigenous -->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_is_indigenous" class="form-label1">Is Indigenous?</label>
                                                <span id="v_is_indigenous"></span>
                                                </div>
                                            </div>
                                            <div id="v_indigenous_type"></div>
                                             <!-- PWD -->
                                             <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_is_pwd" class="form-label1">Is PWD?</label>
                                                <span id="v_is_pwd"></span>
                                                </div>
                                            </div>
                                            <div id="v_pwd_id"></div>
                                            <!--Single Parent-->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_is_single_parent" class="form-label1">Is Single Parent?</label>
                                                <span id="v_is_single_parent"></span>
                                                </div>
                                            </div>                  
                                             <!-- Voter -->
                                            <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_is_registered_voter" class="form-label1">Is Registered Voter?</label>
                                                <span id="v_is_registered_voter"></span>
                                                </div>
                                            </div>
                                            <div id="v_voting_precint_no"></div>
                                             <!-- Multiple Files Input Example -->
                                             <div class="col-xxl-3 col-md-6">
                                                <div class="asterisk">
                                                <label for="v_valid_id" class="form-label1">Valid ID </label>
                                                <span id="v_valid_id"></span>
                                                 </div>
                                            </div>
                                    </div>
                                        <!-- family bg -->
                                        
                                                    <div class="col-lg-12">
                                                        <div class="card">
                                                            <div class="card-header align-items-center d-flex justify-content-between">
                                                                <h4 class="mb-sm-0">Mother's Information</h4>
                                                            </div>
                                                    <!-- end card header -->
                                                            <div class="card-body">
                                                                <div class="live-preview">
                                                                    <div class="row gy-4">
                                                                        <div class="col-xxl-3 col-md-6">
                                                                            <div class="asterisk">
                                                                                <label for="v_m_name" class="form-label1"> Mother's Name </label>
                                                                                <span style="  display: inline-block" id="v_m_name"></span>        
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-xxl-3 col-md-6">
                                                                        <div class="asterisk">
                                                                            <label for="v_m_address" class="form-label1">Address</label>
                                                                            <span id="v_m_address"></span>
                                                                        </div>
                                                                    </div>
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="v_m_birthday" class="form-label1">Birthday</label>
                                                                        <span id="v_m_birthday"></span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="v_m_sex" class="form-label1">Gender</label>
                                                                        <span id="v_m_sex"></span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="v_m_phone_no" class="form-label1">Phone Number </label>
                                                                        <div class="form-icon right">
                                                                            <span id="v_m_phone_no"></span>
                                                                        </div>
                                                                     </div>
                                                                    </div>
                                                                    <div class="col-xxl-3 col-md-6">
                                                                        <div class="asterisk">
                                                                            <label for="v_m_email" class="form-label1">Email </label>
                                                                            <div class="form-icon right">
                                                                                <span id="v_m_email"></span> 
                                                                            </div>
                                                                        </div>
                                                                    </div>        
                                                                </div>
                                                            </div>
                                                      </div>
                                                     </div>
                                                     </div>
                                            <!-- Father's Information -->
                                            <div class="col-lg-12">
                                                <div class="card">
                                                    <div class="card-header align-items-center d-flex justify-content-between">
                                                        <h4 class="mb-sm-0">Father's Information</h4>
                                                    </div>
                                            <!-- end card header -->
                                                    <div class="card-body">
                                                        <div class="live-preview">
                                                            <div class="row gy-4">
                                                                <div class="col-xxl-3 col-md-6">
                                                                    <div class="asterisk">
                                                                        <label for="v_f_name" class="form-label1"> Father's Name </label>
                                                                        <span id="v_f_name"></span> 
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="v_f_address" class="form-label1">Address</label>
                                                                    <span id="v_f_address"></span> 
                                                                </div>
                                                            </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="v_f_birthday" class="form-label1">Birthday</label>
                                                                <span id="v_f_birthday"></span> 
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="v_f_sex" class="form-label1">Gender</label>
                                                                <span id="v_f_sex"></span>  
                                                            </div>
                                                        </div>
                                                        <div class="col-xxl-3 col-md-6">
                                                            <div class="asterisk">
                                                                <label for="v_f_phone_no" class="form-label1">Phone Number </label>
                                                                <span id="v_f_phone_no"></span> 
                                                                <div class="form-icon right">
                                                                </div>
                                                             </div>
                                                            </div>
                                                            <div class="col-xxl-3 col-md-6">
                                                                <div class="asterisk">
                                                                    <label for="v_f_email" class="form-label1">Email </label>
                                                                    <span id="v_f_email"></span> 
                                                                    <div class="form-icon right">
                                                                    </div>
                                                                </div>
                                                            </div>                                                           
                                                    </div>
                                                    </div>
                                              </div>
                                             </div>
                                             </div>
                                    </div><!--end row-->
                            </div>   
                        </div>
                    <!-- end of view modal -->

{% block css %}
<link href="{% static 'css/profiles.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'img/bitbo_logo.png' %}" rel="icon">
{% endblock %}
<!-- Pagination -->
{% block js %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{% static 'js/profiles.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js" ></script>
<script>

// Function to load resident data with pagination and search
function loadResidents(page = 1, searchTerm = "", filteredData = null) {
    var data = filteredData ? filteredData.data : null;
    var totalPages = filteredData ? Math.ceil(filteredData.total / filteredData.limit) : 0;

    // If filtered data is not provided, make an AJAX request to fetch the data
    if (!data) {
        $.ajax({
            url: "http://127.0.0.1:8000/residentprofiles/getp?page=" + page + "&limit=10&search=" + encodeURIComponent(searchTerm),
            type: "GET",
            headers: {
                "Authorization": "Bearer " + localStorage.getItem('token')
            },
            success: function (responseData) {
                // Call loadResidents with the fetched data and current page
                loadResidents(page, searchTerm, responseData);
            },
            error: function () {
                // Handle error case
                console.error('Error fetching residents data.');
            }
        });
    } else {
        // Clear existing data
        $("#residentTableBody").empty();

        // Check if residents data is available
        if (data.length > 0) {
            // Iterate through residents and append rows to the table
            $.each(data, function (index, resident) {
                var row = '<tr>' +
                    '<td>' + resident.first_name + ' ' + resident.middle_name + ' ' + resident.last_name + '</td>' +
              
                    '<td style="display: flex; gap: 10px;">' +
                    '<button class="btn btn-soft-secondary edit-btn" data-residentid="' + resident.id + '" type="button" data-bs-toggle="modal" data-bs-target="#editModal">' +
                    '<a class="dropdown-item"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i> Edit</a>' +
                    '</button>' +
                    '<button class="btn btn-soft-success" data-residentid="' + resident.id + '" type="button" data-bs-toggle="modal" aria-expanded="false" data-bs-target="#viewModal">' +
                    '<a class="dropdown-item"><i class="ri-eye-fill align-bottom me-2 text-muted"></i> View</a>' +
                    '</button>' +
                    '<button class="btn btn-soft-primary delete-btn" data-residentid="' + resident.id + '" type="button" aria-expanded="false">' +
                    '<a class="dropdown-item" onclick="event.preventDefault();"><i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i> Delete</a>' +
                    '</button>' +
                    '</td>' +
                    '</tr>';

                // Append the row to the table body
                $("#residentTableBody").append(row);
            });
        } else {
            // Handle case when no residents are found
            $("#residentTableBody").html('<tr><td colspan="5">No residents found</td></tr>');
        }

        // Update pagination controls
        updatePagination(page, totalPages);
    }
}

// Function to update pagination controls
function updatePagination(currentPage, totalPages) {
    // Clear existing pagination controls
    $("#pagination").empty();

    // Add previous button
    if (currentPage > 1) {
        $("#pagination").append('<li class="page-item"><a class="page-link" href="#" data-page="' + (currentPage - 1) + '">Previous</a></li>');
    }

    // Add page numbers
    for (var i = 1; i <= totalPages; i++) {
        var activeClass = i === currentPage ? 'active' : '';
        $("#pagination").append('<li class="page-item ' + activeClass + '"><a class="page-link" href="#" data-page="' + i + '">' + i + '</a></li>');
    }

    // Add next button
    if (currentPage < totalPages) {
        $("#pagination").append('<li class="page-item"><a class="page-link" href="#" data-page="' + (currentPage + 1) + '">Next</a></li>');
    }

    // Add click event listener to pagination links
    $("#pagination").find("a.page-link").on("click", function (e) {
    e.preventDefault();
    var page = parseInt($(this).data("page"));
    var searchTerm = $("#searchInput").val(); // Get the search term
    loadResidents(page, searchTerm); // Pass both page number and search term
});
}

    // Search input change event handler
    $("#searchInput").on("input", function () {
        var searchTerm = $(this).val();
        loadResidents(1, searchTerm);
    });

    // Initial load of residents data
    loadResidents();

 $(document).ready(function () {
    // Function to dynamically generate pagination buttons
    function generatePaginationButtons(totalPages) {
        var paginationContainer = $(".pagination");
        paginationContainer.empty();

        for (var i = 1; i <= totalPages; i++) {
            var button = '<li class="page-item"><a class="page-link pagination-link" href="#" data-page="' + i + '">' + i + '</a></li>';
            paginationContainer.append(button);
        }
    }

    // Pagination click event handler
    $(document).on("click", ".pagination-link", function (event) {
        event.preventDefault();
        var page = $(this).attr("data-page");
        loadResidents(page);
    });

    // Variable to store the current page
    var currentPage = 1;

    // Function to load the next page
    function loadNextPage() {
        currentPage++;
        loadResidents(currentPage);
    }

    // Function to load the previous page
    function loadPreviousPage() {
        if (currentPage > 1) {
            currentPage--;
            loadResidents(currentPage);
        }
    }

    // DELETE MODAL POP UP ---------------------------------------------------------------
    $(document).on("click", ".delete-btn", function () {
        var residentId = $(this).data("residentid");

        // Display a confirmation prompt using SweetAlert
        Swal.fire({
            title: "Are you sure you want to delete?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes"
        }).then((result) => {
            if (result.isConfirmed) {
                // User clicked OK in the confirmation prompt
                // Call the function to delete the resident with the given ID
                deleteResident(residentId);
            }
        });
    });

    // DELETE RESIDENT
    function deleteResident(residentId) {
        $.ajax({
            url: "http://127.0.0.1:8000/residentprofiles/" + residentId,
            type: "DELETE",
            headers: {
                "Authorization": "Bearer " + localStorage.getItem('token')
            },
            success: function (data) {
                // Show success message using SweetAlert
                Swal.fire({
                    title: "Deleted!",
                    text: "Your file has been deleted.",
                    icon: "success"
                });

                // Reload the residents after successful deletion
                loadResidents();
            },
            error: function () {
                // Handle error case
                console.error('Error deleting resident.');
            }
        });
    }
// EDIT MODAL-------------------------------------------------
$(document).on("click", ".btn-soft-secondary", function () {
    var residentId = $(this).data("residentid");

    // Set the resident ID to the modal data attribute
    $('#editModal').data('resident-id', residentId);

    // Call the function to get specific resident data by ID
    getResidentforEdit(residentId);
});

        // Function to get specific resident data by ID
        function getResidentforEdit(residentId) {
            console.log('Getting resident with ID:', residentId);
            $.ajax({
                url: "http://127.0.0.1:8000/residentprofiles/" + residentId,
                type: "GET",
                headers: {
                    "Authorization": "Bearer " + localStorage.getItem('token')
                },
                success: function (data) {
                    // Populate the form fields with the resident data
                    showEditModal(data.data);

                    // Open the modal for editing
                    $('#editModal').modal('show');
                },
                error: function (xhr, textStatus, errorThrown) {
                    // Handle error case
                    console.error('Error fetching resident data:', textStatus, errorThrown);
                }
            });
        }

        // Function to populate form fields with resident data
        function showEditModal(residentData) {
            // Assuming you have form fields with corresponding IDs, update their values
            $('#first_name').val(residentData.first_name);
            $('#middle_name').val(residentData.middle_name);
            $('#last_name').val(residentData.last_name);
            $('#suffix').val(residentData.suffix);
            $('#e_age').val(residentData.age);
            $('#birthday').val(residentData.birthday);
            $('#e_birth_order').val(residentData.birth_order);
            $('#birth_place').val(residentData.birth_place);
            $('#blood_type').val(residentData.blood_type);
            $('#sex').val(residentData.sex);
            $('#civil_status').val(residentData.civil_status);
            $('#house_no').val(residentData.house_no);
            $('#street').val(residentData.street);
            $('#phone_no').val(residentData.phone_no);
            $('#email').val(residentData.email);
            $('#occupation').val(residentData.occupation);
            //FOR OCCUPATION: EMPLOYEES
            $('#educational_attainment').val(residentData.educational_attainment);
            $('#emp_school').val(residentData.emp_school);
            $('#emp_degree').val(residentData.emp_degree);
            $('#emp_company').val(residentData.emp_company);
            $('#emp_position').val(residentData.emp_position);
            $('#emp_salary').val(residentData.emp_salary);
            $('#years_employed').val(residentData.years_employed);
            // FOR OCCUPATION: STUDENTS
            $('#educational_level').val(residentData.educational_level);
            $('#elem_grade_level').val(residentData.elem_grade_level);
            $('#hs_grade_level').val(residentData.hs_grade_level);
            $('#shs_grade_level').val(residentData.shs_grade_level);
            $('#shs_strand').val(residentData.shs_strand);
            // FOR OCCUPATION: STUDENTS: COLLEGE
            $('#college_course').val(residentData.college_course);
            $('#college_year').val(residentData.college_year);
            $('#college_school').val(residentData.college_school);

           
            $('#ethnicity').val(residentData.ethnicity);
            $('#religion').val(residentData.religion);

            $('#is_indigenous').val(residentData.is_indigenous);
            $('#indigenous_type').val(residentData.indigenous_type);

            $('#is_pwd').val(residentData.is_pwd);
            $('#pwd_id').val(residentData.pwd_id);

            $('#is_solo_parent').val(residentData.is_solo_parent);

            $('#is_registered_voter').val(residentData.is_registered_voter);
            $('#voting_precint_no').val(residentData.voting_precint_no);

            $('#SSS_no').val(residentData.SSS_no);
            $('#GSIS_no').val(residentData.GSIS_no);
            $('#TIN_no').val(residentData.TIN_no);
            $('#valid_id').val(residentData.valid_id);

            //Mother's Information (View)
            $('#e_m_first_name').val(residentData.m_first_name);
            $('#m_middle_name').val(residentData.m_middle_name);
            $('#m_last_name').val(residentData.m_last_name);
            $('#m_blk').val(residentData.m_blk);
            $('#m_street').val(residentData.m_street);
            $('#m_birthday').val(residentData.m_birthday);
            $('#m_sex').val(residentData.m_sex);
            $('#m_phone_no').val(residentData.m_phone_no);
            $('#m_email').val(residentData.m_email);
            //Father's Information
            $('#f_first_name').val(residentData.f_first_name);
            $('#f_middle_name').val(residentData.f_middle_name);
            $('#f_last_name').val(residentData.f_last_name);
            $('#f_suffix').val(residentData.f_suffix);
            $('#f_blk').val(residentData.f_blk);
            $('#f_street').val(residentData.f_street);
            $('#f_birthday').val(residentData.f_birthday);
            $('#f_sex').val(residentData.f_sex);
            $('#f_phone_no').val(residentData.f_phone_no);
            $('#f_email').val(residentData.f_email);
            // Repeat this for other form fields
        }

// Attach a submit event handler to the form
        $(document).on("submit", "form", function (event) {
            // Prevent the default form submission
            event.preventDefault();

    // Display a confirmation dialog using SweetAlert
    Swal.fire({
        title: "Are you sure you want to edit?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes"
    }).then((result) => {
        if (result.isConfirmed) {
            // Get the resident ID from the form or any other source you have
            var residentId = getResidentId(); // Implement the function to get the resident ID

            console.log('Resident ID:', residentId); // Log the residentId before making the request

            // Call the function to update resident data by ID
            updateResident(residentId);

            // Display success message using SweetAlert
            Swal.fire({
                title: "Submitted!",
                text: "Data has been submitted.",
                icon: "success"
            });
        }
    });
});
        // Function to update resident data by ID
        function updateResident(residentId) {
            var residentData = getFormData();
            console.log('Sending data to server:', residentData);

            $.ajax({
                url: "http://127.0.0.1:8000/residentprofiles/" + residentId,
                type: "PUT",
                contentType: "application/json",
                data: JSON.stringify(residentData),
                dataType: 'json',
                headers: {
                    "Authorization": "Bearer " + localStorage.getItem('token')
                },
                success: function (data) {
                    console.log("Resident updated successfully");
               
                // Reload the residents after successful deletion
                loadResidents();
                },
                
                error: function (xhr, textStatus, errorThrown) {
                    console.error('Error updating resident data:', textStatus, errorThrown);
                }
            });
        }

        // Function to gather form data into an object
        function getFormData() {
            // Create an object to store form data
            var residentData = {
                first_name: $('#first_name').val(),
                middle_name: $('#middle_name').val(),
                last_name: $('#last_name').val(),
                suffix: $('#suffix').val(),
                age: $('#e_age').val(),
                birthday: $('#birthday').val(),
                birth_order: $('#e_birth_order').val(),
                birth_place: $('#birth_place').val(),
                blood_type: $('#blood_type').val(),
                sex: $('#sex').val(),
                civil_status: $('#civil_status').val(),
                house_no: $('#house_no').val(),
                street: $('#street').val(),
                phone_no: $('#phone_no').val(),
                email: $('#email').val(),
                occupation: $('#occupation').val(),
               
                //FOR OCCUPATION: EMPLOYEES
                educational_attainment: $('#educational_attainment').val(),
                emp_school: $('#emp_school').val(),
                emp_degree: $('#emp_degree').val(),
                emp_company: $('#emp_company').val(),
                emp_position: $('#emp_position').val(),
                emp_salary: $('#emp_salary').val(),
                years_employed: $('#years_employed').val(),
                // FOR OCCUPATION: STUDENTS
                educational_level: $('#educational_level').val(),
                elem_grade_level: $('#elem_grade_level').val(),
                hs_grade_level: $('#hs_grade_level').val(),
                shs_grade_level: $('#shs_grade_level').val(),
                shs_strand: $('#shs_strand').val(),
                // FOR OCCUPATION: STUDENTS: COLLEGE
                college_course: $('#college_course').val(),
                college_year: $('#college_year').val(),
                college_school: $('#college_school').val(),
        
                ethnicity: $('#ethnicity').val(),
                religion: $('#religion').val(),
        
                is_indigenous: $('#is_indigenous').val(),
                indigenous_type: $('#indigenous_type').val(),
        
                is_pwd: $('#is_pwd').val(),
                pwd_id: $('#pwd_id').val(),
        
                is_single_parent: $('#is_single_parent').val(),
        
                is_registered_voter: $('#is_registered_voter').val(),
                voting_precint_no: $('#voting_precint_no').val(),
        
                SSS_no: $('#SSS_no').val(),
                GSIS_no: $('#GSIS_no').val(),
                TIN_no: $('#TIN_no').val(),
                valid_id: $('#valid_id').val(),
                
                m_first_name: $('#m_first_name').val(),
                m_middle_name: $('#m_middle_name').val(),
                m_last_name: $('#m_last_name').val(),
                m_blk: $('#m_blk').val(),
                m_street: $('#m_street').val(),
                m_birthday: $('#m_birthday').val(),
                m_sex: $('#m_sex').val(),
                m_phone_no: $('#m_phone_no').val(),
                m_email: $('#m_email').val(),
                f_first_name: $('#f_first_name').val(),
                f_middle_name: $('#f_middle_name').val(),
                f_last_name: $('#f_last_name').val(),
                f_suffix: $('#f_suffix').val(),
                f_blk: $('#f_blk').val(),
                f_street: $('#f_street').val(),
                f_birthday: $('#f_birthday').val(),
                f_sex: $('#f_sex').val(),
                f_phone_no: $('#f_phone_no').val(),
                f_email: $('#f_email').val(),
                // Add other form fields here
            };
            // Return the object
            return residentData;
        }

        // Function to get the resident ID (you need to implement this based on your application logic)
        function getResidentId() {
            // Implement the logic to retrieve the resident ID
            // For example, if you have stored the resident ID in a data attribute of the form:
            return $('#editModal').data('resident-id');
        }
    });

// VIEW MODAL ------------------------------------------------------------------------
$(document).on("click", ".btn-soft-success", function () {
    var residentId = $(this).data("residentid");

    // Call the function to get specific resident data by ID
    getResidentForView(residentId);
});


// Function to get specific resident data by ID for view modal
function getResidentForView(residentId) {
    console.log('Getting resident with ID for view modal:', residentId);
    $.ajax({
        url: "http://127.0.0.1:8000/residentprofiles/" + residentId,
        type: "GET",
        headers: {
            "Authorization": "Bearer " + localStorage.getItem('token')
        },
        success: function (data) {
            // Update the view modal with resident data
           showViewModal(data.data);

            // Open the view modal
            $('#viewModal').modal('show');
        },
        error: function (xhr, textStatus, errorThrown) {
            // Handle error case
            console.error('Error fetching resident data for view modal:', textStatus, errorThrown);
        }
    });
}

function showViewModal(residentData) {
    // Update basic resident information
    var vName = residentData.first_name + ' ' + residentData.middle_name + ' ' + residentData.last_name;
    if (residentData.suffix) {
        vName += ' ' + residentData.suffix;
    }
    $('#v_name').text(vName);
    $('#v_age').text(residentData.age);
    $('#v_birthday').text(residentData.birthday);
    $('#v_birth_order').text(residentData.birth_order);
    $('#v_birth_place').text(residentData.birth_place);
    $('#v_blood_type').text(residentData.blood_type);
    $('#v_sex').text(residentData.sex);
    $('#v_civil_status').text(residentData.civil_status);
    $('#v_house_no').text(residentData.house_no + ' ' + residentData.street);
    $('#v_phone_no').text(residentData.phone_no);
    $('#v_email').text(residentData.email);
    $('#v_valid_id').text(residentData.valid_id);
    $('#v_is_single_parent').text(residentData.is_single_parent);
    $('#v_religion').text(residentData.religion);
    $('#v_ethnicity').text(residentData.ethnicity);
    $('#v_is_single_parent').text(residentData.is_single_parent);
    

    if (residentData.occupation == 'Employed') {
        $('#v_occupation').text('Employed');
        $('#v_educational_attainment').html('<p><b>Educational Attainment:</b> ' + residentData.educational_attainment + '</p>');
        $('#v_emp_degree').html('<p><b>Degree:</b> ' + residentData.emp_degree + '</p>');
        $('#v_emp_company').html('<p><b>Company:</b> ' + residentData.emp_company + '</p>');
        $('#v_emp_position').html('<p><b>Position:</b> ' + residentData.emp_position + '</p>');
        $('#v_emp_salary').html('<p><b>Salary:</b> ' + residentData.emp_salary + '</p>');
        $('#v_years_employed').html('<p><b>Years Employed:</b> ' + residentData.years_employed + '</p>');
    } else if (residentData.occupation == 'Student'){
        $('#v_occupation').text('Student');
        $('#v_educational_level').text(residentData.educational_level);
        if (residentData.educational_level == 'Elementary'){
            $('#v_educational_level').text('Elementary');
            $('#v_elem_grade_level').html('<p><b>Grade Level:</b> ' + residentData.elem_grade_level + '</p>');
        } else if (residentData.educational_level == 'High School'){
            $('#v_educational_level').text('High School');
            $('#v_hs_grade_level').html('<p><b>Grade Level:</b> ' + residentData.hs_grade_level + '</p>');
        } else if (residentData.educational_level == 'Senior High School'){
            $('#v_educational_level').text('Senior High School');
            $('#v_shs_grade_level').html('<p><b>Grade Level:</b> ' + residentData.shs_grade_level + '</p>');
            $('#v_shs_strand').html('<p><b>Strand:</b> ' + residentData.shs_strand + '</p>');
        } else if (residentData.educational_level == 'College'){
            $('#v_educational_level').text('College');
            $('#v_college_course').html('<p><b>College Course:</b> ' + residentData.college_course + '</p>');
            $('#v_college_year').html('<p><b>College Year:</b> ' + residentData.college_year + '</p>');
            $('#v_college_school').html('<p><b>College School:</b> ' + residentData.college_school + '</p>');
        }
    } else if (residentData.occupation == 'Unemployed'){
        $('#v_occupation').text('Unemployed');
    } else if (residentData.occupation == 'Retired'){
        $('#v_occupation').text('Retired');
    }

    // Update additional resident information based on attributes
    if (residentData.is_indigenous == 'Yes') {
        $('#v_is_indigenous').text('Yes');
        $('#v_indigenous_type').html('<p><b>Indigenous Type:</b> ' + residentData.indigenous_type + '</p>'); 
    } else {
        $('#v_is_indigenous').text('No');
    }

    if (residentData.is_pwd == 'Yes') {
        $('#v_is_pwd').text('Yes');
        $('#v_pwd_id').html('<p><b>PWD ID:</b> ' + residentData.pwd_id + '</p>'); 
    } else {
        $('#v_is_pwd').text('No');
    }

    if (residentData.is_registered_voter == 'Yes') {
        $('#v_is_registered_voter').text('Yes');
        $('#v_voting_precint_no').html('<p><b>Voting Precinct Number:</b> ' + residentData.voting_precint_no + '</p>'); 
    } else {
        $('#v_is_registered_voter').text('No');
    }

    // Show mother's information
    $('#v_m_name').text(residentData.m_first_name + ' ' + residentData.m_middle_name + ' ' + residentData.m_last_name);
    $('#v_m_address').text(residentData.m_blk + ' ' + residentData.m_street);
    $('#v_m_birthday').text(residentData.m_birthday);
    $('#v_m_sex').text(residentData.m_sex);
    $('#v_m_phone_no').text(residentData.m_phone_no);
    $('#v_m_email').text(residentData.m_email);
    
    // show father's information
    $('#v_f_name').text(residentData.f_first_name + ' ' + residentData.f_middle_name + ' ' + residentData.f_last_name);
    $('#v_f_address').text(residentData.f_blk + ' ' + residentData.f_street);
    $('#v_f_birthday').text(residentData.f_birthday);
    $('#v_f_sex').text(residentData.f_sex);
    $('#v_f_phone_no').text(residentData.f_phone_no);
    $('#v_f_email').text(residentData.f_email);
}

//SECURITY--------------
    // Check for the token when the page loads
    document.addEventListener("DOMContentLoaded", function() {
         var token = localStorage.getItem('token');
         if (token) {
             // Show the services content if the token is present
             document.getElementById('whole-content').style.display = 'block';
         } else {
             // Redirect to login if token is not present
             window.location.href = "/login";  // Adjust the login page URL if necessary
         }
     });


// Advanced Search/ Filter 
    //Automatic data clear out if the user closes the filter modal
        var filterModal = document.getElementById("FilterModal");

        filterModal.addEventListener("hidden.bs.modal", function () {
            // Clear dropdowns
            var dropdowns = filterModal.querySelectorAll("select");
            dropdowns.forEach(function(dropdown) {
                dropdown.value = "";
            });

            // Clear radio buttons
            var radioButtons = filterModal.querySelectorAll("input[type='radio']");
            radioButtons.forEach(function(radioButton) {
                radioButton.checked = false;
            });
        });    
// Filter
// Event listener for the Filter button
$("#filterButton").on("click", function () {
        // Gather filter criteria from form inputs
        var age = $("#age").val();
        var bloodType = $("#blood_type").val();
        var occupation = $("#occupation").val();
        var civilStatus = $("#civil_status").val();
        var sex = $("input[name='sex']:checked").val();
        var isSingleParent = $("input[name='is_single_parent']:checked").val();
        var isIndigenous = $("input[name='is_indigenous']:checked").val();
        var isPWD = $("input[name='is_pwd']:checked").val();
        var isRegisteredVoter = $("input[name='is_registered_voter']:checked").val();

        // Make Ajax request to fetch filtered resident data
        $.ajax({
            url: "http://127.0.0.1:8000/residentprofiles/getp",
            type: "GET",
            data: {
                age: age,
                blood_type: bloodType,
                occupation: occupation,
                civil_status: civilStatus,
                sex: sex,
                is_single_parent: isSingleParent,
                is_indigenous: isIndigenous,
                is_pwd: isPWD,
                is_registered_voter: isRegisteredVoter
            },
            headers: {
                "Authorization": "Bearer " + localStorage.getItem('token')
            },
            success: function (data) {
                loadResidents (1, null, data); // Pass the filtered data to loadResidents function
            },
            error: function () {
                // Handle error case
                console.error('Error fetching filtered residents data.');
            }
        });
    });

</script>
{% endblock %}
{% endblock %}
